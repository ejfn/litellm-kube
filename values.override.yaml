# Custom LLM Stack Configuration
# Use this file to override default values for your deployment
# Deploy with: helm install my-llm-stack ./llm-stack -f values.my.yaml

# LiteLLM Configuration
litellm:
  enabled: true
  
  # Enable NodePort for external access
  nodeport:
    enabled: true
    nodePort: 30400
  
  # Custom proxy configuration
  proxy_config:
    model_list:
      # Anthropic Models - ensures Claude Code builtin models continue working
      - model_name: claude-*
        litellm_params:
          model: anthropic/claude-*
          api_key: os.environ/ANTHROPIC_API_KEY
      # Anthropic Models        
      - model_name: anthropic/*
        litellm_params:
          model: anthropic/*
          api_key: os.environ/ANTHROPIC_API_KEY        
      # Google Gemini Models
      - model_name: gemini/*
        litellm_params:
          model: gemini/*
          api_key: os.environ/GOOGLE_API_KEY
      # OpenAI Models
      - model_name: openai/*
        litellm_params:
          model: openai/*
          api_key: os.environ/OPENAI_API_KEY
          max_completion_tokens: 128000
      # xAi Models
      - model_name: xai/*
        litellm_params:
          model: xai/*
          api_key: os.environ/XAI_API_KEY       

    litellm_settings:
      check_provider_endpoint: true
      drop_params: true
          
  # Environment secrets for API keys
  environmentSecrets:
    - litellm-provider-keys

  # Database configuration
  db:
    deployStandalone: false
    useExisting: true
    endpoint: postgresql.postgresql.svc.cluster.local
    database: litellm
    secret:
      name: litellm-db-credentials
      usernameKey: username
      passwordKey: password

# Open WebUI Configuration
open-webui:
  enabled: true
  
  # Enable NodePort for external access
  nodeport:
    enabled: true
    nodePort: 30401
  
  # Custom environment variables
  extraEnvVars: 
    - name: ENABLE_FORWARD_USER_INFO_HEADERS
      value: "True"
    - name: OPENID_PROVIDER_URL
      value: "https://accounts.google.com/.well-known/openid-configuration"

  extraEnvFrom:
    - secretRef:
        name: open-webui-db-credentials

  # SSO Configuration
  sso:
    enabled: true
    enableSignup: true
    google:
      enabled: true
      clientId: "241824255096-g52vq0gh29q4qba5rupvmqvt8rmjhj5m.apps.googleusercontent.com"
      clientExistingSecret: "google-oauth-secret"
      clientExistingSecretKey: "client_secret"

# Qdrant Configuration
qdrant:
  enabled: true

  # Enable NodePort for external access
  nodeport:
    enabled: true
    nodePort: 30402
  
  # Custom persistence settings
  persistence:
    enabled: true
    size: 10Gi
  